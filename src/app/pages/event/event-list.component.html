<app-event-search-bar 
  [filters]="eventFilters"
  [searchFieldOptions]="searchFieldOptions"
  [showSearchInput]="true"
  [showAdvancedSearch]="false"
  (searchTriggered)="handleSearch($event)"
  (advancedSearchTriggered)="handleAdvancedSearch()">
</app-event-search-bar>

<div class="table-section">
  <app-base-table 
    [title]="'Tất cả sự kiện'" 
    [data]="tableData" 
    [columnsToDisplay]="columnsToDisplay"
    [columnDefs]="columnDefs" 
    [actions]="['view']" 
    [hasError]="hasError"
    [errorMessage]="errorMessage"
    (view)="handleViewClick($event)"
    (imageClick)="handleImageClick($event)"
    (refresh)="onRetry()"
    (clearFilterData)="onClearFilterData()">
  </app-base-table>

  <app-custom-paginator 
    *ngIf="shouldShowPagination"
    [totalItems]="totalItems" 
    [pageSize]="pageSize" 
    [currentPage]="pageNumber"
    (pageChange)="onPageChange($event)">
  </app-custom-paginator>
</div>

<!-- Event Detail Popup (Sidebar) -->
<div class="popup-overlay" 
     [class.hide-overlay]="popupImageViewerOpen"
     *ngIf="showEventDetailPopup" 
     (click)="!popupImageViewerOpen && closeEventDetailPopup()">
  <app-event-detail-popup
    [eventDetail]="selectedEventDetail"
    [isVisible]="showEventDetailPopup"
    (close)="closeEventDetailPopup()"
    (viewFullDetail)="navigateToFullDetail($event)"
    (imageViewerStateChange)="onPopupImageViewerChange($event)">
  </app-event-detail-popup>
</div>

<!-- Image Viewer Overlay -->
<div class="image-viewer-overlay" *ngIf="showImageViewer" (click)="closeImageViewer()">
  <div class="image-viewer-container" (click)="$event.stopPropagation()">
    <app-image-viewer 
      [event]="currentImageViewerData" 
      (close)="closeImageViewer()">
    </app-image-viewer>
  </div>
</div>